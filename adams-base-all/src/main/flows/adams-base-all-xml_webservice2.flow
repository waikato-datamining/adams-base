# Project: adams
# Date: 2014-05-14 16:53:48
# User: fracpete
#
adams.flow.control.Flow
	-annotation
	Queries Yahoo! Weather every 15min for an update on the conditions \nin Hamilton, NZ, and plots them.
	-actor
		adams.flow.standalone.GridView
			-actor
				adams.flow.sink.SequencePlotter
					-name
					Temperature
					-writer
						adams.gui.print.NullWriter
					-paintlet
						adams.gui.visualization.sequence.LinePaintlet
					-overlay-paintlet
						adams.gui.visualization.sequence.CirclePaintlet
					-marker-paintlet
						adams.flow.sink.sequenceplotter.NoMarkers
					-error-paintlet
						adams.flow.sink.sequenceplotter.NoErrorPaintlet
					-color-provider
						adams.gui.visualization.core.DefaultColorProvider
					-overlay-color-provider
						adams.gui.visualization.core.DefaultColorProvider
					-title
					Temperature
					-axis-x
						adams.gui.visualization.core.AxisPanelOptions
							-label
							time (utc)
							-type
							TIME
							-tick-generator
								adams.gui.visualization.core.axis.SimpleTickGenerator
							-width
							40
							-custom-format
							M/d HH:mm
					-axis-y
						adams.gui.visualization.core.AxisPanelOptions
							-label
							temperature (C)
							-tick-generator
								adams.gui.visualization.core.axis.SimpleTickGenerator
							-width
							80
							-top-margin
							0.05
							-bottom-margin
							0.05
							-custom-format
							0.0
					-plot-updater
						adams.flow.sink.sequenceplotter.SimplePlotUpdater
					-post-processor
						adams.flow.sink.sequenceplotter.PassThrough
			-actor
				adams.flow.sink.SequencePlotter
					-name
					Wind
					-writer
						adams.gui.print.NullWriter
					-paintlet
						adams.gui.visualization.sequence.LinePaintlet
					-overlay-paintlet
						adams.gui.visualization.sequence.CirclePaintlet
					-marker-paintlet
						adams.flow.sink.sequenceplotter.NoMarkers
					-error-paintlet
						adams.flow.sink.sequenceplotter.NoErrorPaintlet
					-color-provider
						adams.gui.visualization.core.DefaultColorProvider
					-overlay-color-provider
						adams.gui.visualization.core.DefaultColorProvider
					-title
					Wind
					-axis-x
						adams.gui.visualization.core.AxisPanelOptions
							-label
							time (utc)
							-type
							TIME
							-tick-generator
								adams.gui.visualization.core.axis.SimpleTickGenerator
							-width
							40
							-custom-format
							M/d HH:mm
					-axis-y
						adams.gui.visualization.core.AxisPanelOptions
							-label
							wind (kph)
							-tick-generator
								adams.gui.visualization.core.axis.SimpleTickGenerator
							-width
							80
							-top-margin
							0.05
							-bottom-margin
							0.05
							-custom-format
							0.0
					-plot-updater
						adams.flow.sink.sequenceplotter.SimplePlotUpdater
					-post-processor
						adams.flow.sink.sequenceplotter.PassThrough
			-actor
				adams.flow.sink.SequencePlotter
					-name
					Pressure
					-writer
						adams.gui.print.NullWriter
					-paintlet
						adams.gui.visualization.sequence.LinePaintlet
					-overlay-paintlet
						adams.gui.visualization.sequence.CirclePaintlet
					-marker-paintlet
						adams.flow.sink.sequenceplotter.NoMarkers
					-error-paintlet
						adams.flow.sink.sequenceplotter.NoErrorPaintlet
					-color-provider
						adams.gui.visualization.core.DefaultColorProvider
					-overlay-color-provider
						adams.gui.visualization.core.DefaultColorProvider
					-title
					Pressure
					-axis-x
						adams.gui.visualization.core.AxisPanelOptions
							-label
							time (utc)
							-type
							TIME
							-tick-generator
								adams.gui.visualization.core.axis.SimpleTickGenerator
							-width
							40
							-custom-format
							M/d HH:mm
					-axis-y
						adams.gui.visualization.core.AxisPanelOptions
							-label
							pressure (mb)
							-tick-generator
								adams.gui.visualization.core.axis.SimpleTickGenerator
							-width
							80
							-top-margin
							0.05
							-bottom-margin
							0.05
							-custom-format
							0.0
					-plot-updater
						adams.flow.sink.sequenceplotter.SimplePlotUpdater
					-post-processor
						adams.flow.sink.sequenceplotter.PassThrough
			-num-rows
			3
			-writer
				adams.gui.print.NullWriter
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.WhileLoop
			-condition
				adams.flow.condition.bool.True
			-loop
				adams.flow.source.Start
			-loop
				adams.flow.control.Trigger
					-name
					download/process XML
					-tee
						adams.flow.source.URLSupplier
							-url
							http://weather.yahooapis.com/forecastrss?w=2348696&u=c
					-tee
						adams.flow.transformer.DownloadContent
					-tee
						adams.flow.transformer.Convert
							-conversion
								adams.data.conversion.XMLToDOM
									-name-space-aware
									true
									-ignoring-whitespace
									true
					-tee
						adams.flow.control.Tee
							-name
							display
							-tee
								adams.flow.sink.DOMDisplay
									-short-title
									true
									-x
									-3
									-writer
										adams.gui.print.NullWriter
									-preview
									true
									-expand
									true
					-tee
						adams.flow.control.Tee
							-name
							timestamp
							-tee
								adams.flow.transformer.XPath
									-expression
									/rss/channel/lastBuildDate
									-result-type
									STRING
							-tee
								adams.flow.transformer.Convert
									-conversion
										adams.data.conversion.StringToDateTimeType
											-format
											EEE, d MMM yyyy hh:mm a zzz
											-datetime-type
											MSECS
							-tee
								adams.flow.transformer.SetVariable
									-var-name
									msec
					-tee
						adams.flow.control.Tee
							-name
							temperature
							-tee
								adams.flow.transformer.XPath
									-expression
									/rss/channel/item/yweather:condition/@temp
									-result-type
									STRING
									-name-space
									yweather=http://xml.weather.yahoo.com/ns/rss/1.0
							-tee
								adams.flow.control.Injector
									-injection
									@{msec}
									-location
									BEFORE
							-tee
								adams.flow.control.Cast
									-classname
									java.lang.String
							-tee
								adams.flow.transformer.Convert
									-conversion
										adams.data.conversion.StringToDouble
							-tee
								adams.flow.transformer.SequenceToArray
									-length
									2
							-tee
								adams.flow.transformer.MakePlotContainer
									-plot-name
									temperature
							-tee
								adams.flow.sink.CallableSink
									-callable
									Temperature
					-tee
						adams.flow.control.Tee
							-name
							wind
							-tee
								adams.flow.transformer.XPath
									-expression
									/rss/channel/yweather:wind/@speed
									-result-type
									STRING
									-name-space
									yweather=http://xml.weather.yahoo.com/ns/rss/1.0
							-tee
								adams.flow.control.Injector
									-injection
									@{msec}
									-location
									BEFORE
							-tee
								adams.flow.control.Cast
									-classname
									java.lang.String
							-tee
								adams.flow.transformer.Convert
									-conversion
										adams.data.conversion.StringToDouble
							-tee
								adams.flow.transformer.SequenceToArray
									-length
									2
							-tee
								adams.flow.transformer.MakePlotContainer
									-plot-name
									wind
							-tee
								adams.flow.sink.CallableSink
									-callable
									Wind
					-tee
						adams.flow.control.Tee
							-name
							pressure
							-tee
								adams.flow.transformer.XPath
									-expression
									/rss/channel/yweather:atmosphere/@pressure
									-result-type
									STRING
									-name-space
									yweather=http://xml.weather.yahoo.com/ns/rss/1.0
							-tee
								adams.flow.control.Injector
									-injection
									@{msec}
									-location
									BEFORE
							-tee
								adams.flow.control.Cast
									-classname
									java.lang.String
							-tee
								adams.flow.transformer.Convert
									-conversion
										adams.data.conversion.StringToDouble
							-tee
								adams.flow.transformer.SequenceToArray
									-length
									2
							-tee
								adams.flow.transformer.MakePlotContainer
									-plot-name
									pressure
							-tee
								adams.flow.sink.CallableSink
									-callable
									Pressure
			-loop
				adams.flow.control.Sleep
					-interval
					900000
	-flow-execution-listener
		adams.flow.execution.NullListener

